<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>USSI</title>

    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../images/favicon.ico">

    <!-- Bootstrap + JQuery -->
    <script src="../../js/libraries/jquery.min.js"></script>
    <script src="../../js/libraries/bootstrap.min.js"></script>
    <link href="../../css/libraries/bootstrap.min.css" rel="stylesheet">

    <!-- Custom stylesheet + js-->
    <link href="../../css/dashboard_style.css" rel="stylesheet">
    <script src="../../js/const.js"></script>
    <script src="../../js/logout.js"></script>

</head>

<body>

<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="#"><img src="../../images/logo.png" alt="USSI"/></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
            aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
        </ul>
        <form class="form-inline mt-2 mt-md-0">
            <button class="btn btn-secondary mr-sm-2" type="button" onclick="logout();">Sign out</button>
        </form>
    </div>
</nav>


<main role="main" class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item active"><a href="#" onclick="history.go(-1)">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Search</li>
        </ol>
    </nav>

    <div class="jumbotron">
        <div class="row justify-content-center">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">
                <h2 style="text-align:center;">Search</h2>
                <hr>
            </div>
            <div class="col-sm-3"></div>
        </div>
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">


                <div class="row">
                    <div class="col-sm-6" style="text-align:center;">
                        <br>
                        <label for="search" style="height:40px;position: relative;">Appointment's Date from:</label>
                        <div class="input-group date myDateParent">
                            <input type="date" id="date_from" min="2019-01-15" max="2020-12-31"
                                   class="form-control myDate" style="border-radius: 5px;">
                        </div>

                    </div>
                    <div class="col-sm-6" style="text-align:center;">
                        <br>
                        <label for="search" style="height:40px;position: relative;">Appointment's Date to:</label>
                        <div class="input-group date myDateParent">
                            <input type="date" id="date_to" class="form-control myDate" autocomplete="off"
                                   style="border-radius: 5px;">
                        </div>

                    </div>
                </div>


            </div>
            <div class="col-sm-3"></div>
        </div>
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6" style="text-align:center;"><br>

                <label for="search" style="height:40px;position: relative;">Select Doctor's Specialty:</label>

                <!--<input type="text" id="search_for" class="form-control" placeholder="eg: Migraines..." autocomplete="off">-->
                <div class="input-group mb-3">
                    <select class="custom-select" id="specialtySelector">
                        <option selected>Choose Specialty...</option>
                        <option value="1">Cardiologist</option>
                        <option value="2">Microbiologist</option>
                        <option value="3">Orthopedic</option>
                    </select>
                </div>
                <br>
                <button type="button" class="btn btn-success" onclick="showSearchResults();">Search</button>


            </div>
            <div class="col-sm-3"></div>
        </div>
    </div>

</main>

<script>
			function showSearchResults() {
				var dateFrom = $('#date_from').val();
				/*var dateFrom = new Date($('#date_from').val());
				if(typeof dateFrom === "undefined"){
					let today = new Date();
					
					let dd = today.getDate();
					let mm = today.getMonth()+1; //January is 0!
					let yyyy = today.getFullYear();
					
					dateFrom = yyyy + '-' + mm + '-' + dd;
				}else{
					let day = dateFrom.getDate();
					let month = dateFrom.getMonth() + 1;
					let year = dateFrom.getFullYear();
					
					dateFrom = year + '-' + month + '-' + day;
				}*/
				
				var dateTo = $('#date_to').val();
				/*var dateTo = new Date($('#date_to').val());
				if(typeof dateTo === "undefined"){
					//dateFrom +1 month
					
				}else{
					let day = dateTo.getDate();
					let month = dateTo.getMonth() + 1;
					let year = dateTo.getFullYear();
					
					dateTo = year + '-' + month + '-' + day;
				}*/

				
				var selected_specialty = $("#specialtySelector option:selected").text();
				
				if (typeof selected_specialty === "undefined") {
					var myURI = 'from=' + dateFrom + '&to=' + dateTo;
					var myEncodedURI = encodeURI(myURI);
				}else {
					var myURI = 'from=' + dateFrom + '&to=' + dateTo + '&specialty=' + selected_specialty;
					var myEncodedURI = encodeURI(myURI);
				}
				
				
				
				$(location).attr('href','cit_appointments.html?' + myEncodedURI);
			}

</script>

</body>

</html>
